@page "/stats"
@using System.Globalization
@inject IJSRuntime _jsRuntime

<div class="row mt-3 mb-3">
	<div class="col-6">
		<h3>Stats Index</h3>
	</div>
	<div class="col-6 text-end">
		<button class="btn btn-outline-dark" type="button" @onclick='() => GeneratePdf("report.pdf")'>
			<i class="fa-solid fa-plus"></i> &nbsp; Download PDF
		</button>
	</div>
</div>

<ul class="nav nav-tabs">
	<li class="nav-item">
		<a class='nav-link btn @(_tabFilter == "Coffee" ? "active" : "")' @onclick='()=>TabFilter("Coffee")'>Coffee</a>
	</li>
	<li class="nav-item">
		<a class='nav-link btn @(_tabFilter == "Add In" ? "active" : "")' @onclick='()=>TabFilter("Add In")'>Add In</a>
	</li>
</ul>	

<table class="table">
	<thead>
	<tr>
		<th>
			<div class="d-flex">
				Title
			</div>
		</th>
		<th>
			<div class="d-flex">
				Unit Price
			</div>
		</th>
		<th>
			<div class="d-flex">
				Total Sales
			</div>
		</th>
		<th>
			<div class="d-flex">
				Last Ordered Date
			</div>
		</th>
		<th></th>
	</tr>
	</thead>
	<tbody>
	@{
		IEnumerable<OrderModel> orderModels = _orderModels;

		foreach (var item in orderModels)
		{
			<tr>
				<td>@item.Name</td>
				<td class="text-end">Rs @item.Price.ToString("N2", CultureInfo.CreateSpecificCulture("ne-NP"))</td>
				<td class="text-end">@item.TotalSales</td>
				<td>@item.LastOrderedDate</td>
			</tr>
		}
		<tr>
			<td colspan="2">Total</td>
			<td class="text-end">@_orderModels.Sum(x => x.TotalSales)</td>
			<td></td>
		</tr>
	}
	</tbody>
</table>